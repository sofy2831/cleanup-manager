<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CleanUp Manager – Prestations</title>

  <style>
    :root {
      --violet-light: #F3ECFF;
      --violet-mid: #DCCBFF;
      --violet-main: #7A5CFF;
      --violet-dark: #6238FF;
      --text-dark: #111;
      --ok:#1b8f4d;
      --bad:#b3261e;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: "Comic Sans MS", sans-serif;
      background: linear-gradient(180deg, #F8F4FF 0%, #EDE6FF 80%);
      color: var(--text-dark);
    }

    .page {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 16px 16px 32px;
      box-sizing: border-box;
    }

    /* TOPBAR */
    .topbar {
      width: 100%;
      max-width: 980px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      position: sticky;
      top: 0;
      z-index: 10;
      padding: 10px 0;
      background: rgba(248, 244, 255, 0.85);
      backdrop-filter: blur(6px);
    }

    .pill-link{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      background:#fff;
      border:2px solid var(--violet-main);
      color:var(--violet-main);
      text-decoration:none;
      font-weight:800;
      font-size:13px;
      white-space:nowrap;
      box-shadow:0 3px 10px rgba(0,0,0,.06);
      cursor:pointer;
    }
    .pill-link.primary{
      background:linear-gradient(90deg,var(--violet-main),var(--violet-dark));
      border-color:transparent;
      color:#fff;
      box-shadow:0 4px 12px rgba(0,0,0,.15);
    }

    /* LOGO */
    .logo-title {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
      margin-top: 8px;
      margin-bottom: 6px;
      text-align: center;
    }

    .logo-icon {
      width: 38px;
      height: 38px;
      border-radius: 50%;
      background: #FFF;
      border: 2px solid var(--violet-main);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--violet-main);
      font-size: 20px;
      font-weight: bold;
      position: relative;
      flex-shrink: 0;
    }

    .logo-icon::after {
      content: "✦";
      position: absolute;
      top: -6px;
      right: -4px;
      font-size: 12px;
      color: var(--violet-main);
    }

    h1 {
      font-size: 24px;
      margin: 0;
      font-weight: 800;
      color: #111;
    }

    .subtitle {
      font-size: 16px;
      color: #444;
      margin-top: 4px;
      text-align: center;
    }

    .badge {
      margin-top: 10px;
      padding: 4px 10px;
      border-radius: 999px;
      background: #fff;
      font-size: 12px;
      color: #555;
      box-shadow: 0 3px 10px rgba(0,0,0,0.06);
      text-align: center;
    }

    /* NAV SECONDAIRE */
    .top-nav {
      margin-top: 14px;
      display: inline-flex;
      flex-wrap:wrap;
      gap: 4px;
      background: #fff;
      border-radius: 999px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      padding: 3px;
      max-width: 980px;
      justify-content:center;
    }

    .top-nav a {
      text-decoration: none;
      font-size: 12px;
      padding: 6px 12px;
      border-radius: 999px;
      color: #555;
    }

    .top-nav a.active {
      background: var(--violet-main);
      color: #fff;
      font-weight: 800;
    }

    /* KPI */
    .kpis {
      width: 100%;
      max-width: 980px;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-top: 12px;
    }
    @media (min-width: 768px) { .kpis { grid-template-columns: repeat(4, 1fr); } }

    .kpi {
      background: linear-gradient(180deg, #FFFFFF 0%, #EEE4FF 100%);
      border-radius: 16px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.08);
      padding: 10px 10px 12px;
      text-align: left;
    }
    .kpi-title { font-size: 12px; color:#666; font-weight:900; margin-bottom:4px; }
    .kpi-value { font-size: 18px; font-weight:900; color:#222; }
    .kpi-note  { font-size: 11px; color:#666; margin-top:2px; }

    /* LAYOUT */
    .services-layout {
      width: 100%;
      max-width: 980px;
      margin-top: 14px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    @media (min-width: 768px) {
      .services-layout { flex-direction: row; align-items: flex-start; }
    }

    .services-card,
    .edit-card {
      background: linear-gradient(180deg, #FFFFFF 0%, #EEE4FF 100%);
      border-radius: 18px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.10);
      padding: 16px 14px 18px;
      box-sizing: border-box;
    }

    .services-card { flex: 1.4; }
    .edit-card { flex: 1; }

    .card-title {
      font-size: 16px;
      font-weight: 900;
      margin-bottom: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .card-title span.sub {
      font-size: 12px;
      font-weight: 400;
      color: #666;
    }

    /* FILTRES */
    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 10px;
    }

    .filter-btn {
      border: none;
      border-radius: 999px;
      padding: 5px 10px;
      font-size: 12px;
      cursor: pointer;
      background: #fff;
      color: #555;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      font-weight: 800;
    }

    .filter-btn.active {
      background: var(--violet-main);
      color: #fff;
    }

    /* LISTE */
    .services-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
      max-height: 460px;
      overflow-y: auto;
    }

    .service-item {
      background: #fff;
      border-radius: 14px;
      padding: 10px 10px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.05);
      font-size: 13px;
      text-align: left;
      display: flex;
      flex-direction: column;
      gap: 6px;
      cursor:pointer;
      border:2px solid transparent;
    }
    .service-item:hover{ border-color: rgba(122,92,255,.35); }

    .service-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .service-name { font-weight: 900; color: #333; }

    .service-chip {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      background: var(--violet-light);
      color: #5b45c8;
      white-space: nowrap;
      font-weight: 900;
    }
    .service-chip.c-menage   { background:#E9F7EF; color:#1E7A3A; }
    .service-chip.c-checkin  { background:#E8F0FE; color:#1A5FD0; }
    .service-chip.c-reassort { background:#FFF4E5; color:#A15C00; }
    .service-chip.c-autre    { background:#EFEAFB; color:#5B45C8; }

    .service-mainline {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      font-size: 12px;
      color: #555;
      flex-wrap:wrap;
    }

    .service-meta { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
    .price-tag { font-weight: 900; color: var(--violet-dark); }
    .duration-tag { font-size: 11px; color: #666; }

    .kits-tag {
      font-size: 11px;
      color: #2e7b32;
      background: #e1f5e4;
      padding: 2px 8px;
      border-radius: 999px;
      white-space: nowrap;
      font-weight: 900;
    }

    .desc { font-size: 12px; color: #666; }

    /* FORM */
    .edit-card form { display: flex; flex-direction: column; gap: 8px; }
    .form-group { text-align: left; }

    .form-group label {
      display: block;
      font-size: 12px;
      font-weight: 900;
      margin-bottom: 4px;
      color: #333;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      box-sizing: border-box;
      padding: 7px 9px;
      border-radius: 10px;
      border: 1px solid #D3C7FF;
      font-size: 12px;
      outline: none;
      background: #fff;
      font-family:"Comic Sans MS", sans-serif;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      border-color: var(--violet-main);
      box-shadow: 0 0 0 2px rgba(122, 92, 255, 0.15);
    }

    .inline-fields { display: flex; gap: 8px; }
    .inline-fields .form-group { flex: 1; }

    .small-hint { font-size: 10px; color: #777; margin-top: 2px; line-height: 1.25; }

    .checkbox-row { display: flex; align-items: center; gap: 6px; font-size: 11px; color: #444; }

    .btn-row{
      display:flex;
      gap:8px;
      margin-top:8px;
    }
    .cta-btn {
      width: 100%;
      border: none;
      border-radius: 999px;
      padding: 9px 14px;
      font-size: 13px;
      font-weight: 900;
      color: #fff;
      background: linear-gradient(90deg, var(--violet-main), var(--violet-dark));
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.18);
    }
    .ghost-btn{
      width:100%;
      border:none;
      border-radius:999px;
      padding:9px 14px;
      font-size:13px;
      font-weight:900;
      cursor:pointer;
      background:#fff;
      color:var(--violet-main);
      border:2px solid var(--violet-main);
      box-shadow:0 3px 10px rgba(0,0,0,.06);
    }
    .danger-btn{
      width:100%;
      border:none;
      border-radius:999px;
      padding:9px 14px;
      font-size:13px;
      font-weight:900;
      cursor:pointer;
      background:linear-gradient(90deg,#d64c4c,#b3261e);
      color:#fff;
      box-shadow:0 4px 12px rgba(0,0,0,.18);
    }
    .note{
      margin-top:8px;
      font-size:11px;
      color:#666;
      line-height:1.25;
    }
  </style>
</head>

<body>
<script>
  function getSession(){
    try{ return JSON.parse(localStorage.getItem("cm_auth") || "null"); }
    catch(e){ return null; }
  }
  function requireRole(role){
    const s = getSession();
    if(!s || s.role !== role){
      location.href = "login.html?role=" + encodeURIComponent(role);
    }
  }
  function logout(){
    localStorage.removeItem("cm_auth");
    location.href = "index.html";
  }
  requireRole("conciergerie");
</script>

  <div class="page">

    <!-- TOPBAR -->
    <div class="topbar">
      <a class="pill-link" href="conciergerie.html">← Tableau de bord</a>
      <div style="display:flex; gap:8px; align-items:center;">
        <a class="pill-link primary" href="planning.html">Ouvrir le planning</a>
        <button class="pill-link" type="button" onclick="logout()">Déconnexion</button>
      </div>
    </div>

    <!-- LOGO + TITRE -->
    <div class="logo-title">
      <div class="logo-icon">✓</div>
      <h1>CleanUp Manager</h1>
    </div>

    <div class="subtitle">Prestations – Catalogue, durées et tarifs</div>
    <div class="badge">Réel : stocké dans ta base locale (localStorage)</div>

    <!-- NAV SECONDAIRE (liens réels) -->
    <div class="top-nav">
      <a href="planning.html">Planning</a>
      <a href="logements.html">Logements</a>
      <a href="prestations.html" class="active">Prestations</a>
      <a href="paiement.html">Paiements</a>
      <a href="historique.html">Historique</a>
      <a href="messagerie.html">Messagerie</a>
      <a href="import-ical.html">Import iCal</a>
    </div>

    <!-- KPI -->
    <div class="kpis">
      <div class="kpi">
        <div class="kpi-title">Prestations</div>
        <div class="kpi-value" id="kpiCount">—</div>
        <div class="kpi-note">dans le catalogue</div>
      </div>
      <div class="kpi">
        <div class="kpi-title">Catégorie</div>
        <div class="kpi-value" id="kpiFilter">Tous</div>
        <div class="kpi-note">filtre actif</div>
      </div>
      <div class="kpi">
        <div class="kpi-title">Tarif moyen</div>
        <div class="kpi-value" id="kpiAvg">—</div>
        <div class="kpi-note">sur la sélection</div>
      </div>
      <div class="kpi">
        <div class="kpi-title">Kits inclus</div>
        <div class="kpi-value" id="kpiKits">—</div>
        <div class="kpi-note">sur la sélection</div>
      </div>
    </div>

    <!-- LAYOUT -->
    <div class="services-layout">

      <!-- LISTE -->
      <div class="services-card">
        <div class="card-title">
          <span>Catalogue de prestations</span>
          <span class="sub" id="servicesCountLabel"></span>
        </div>

        <div class="filters">
          <button class="filter-btn active" data-filter="all">Tous</button>
          <button class="filter-btn" data-filter="menage">Ménage</button>
          <button class="filter-btn" data-filter="checkin">Check-in / Check-out</button>
          <button class="filter-btn" data-filter="reassort">Réassort & kits</button>
          <button class="filter-btn" data-filter="autre">Autres</button>
        </div>

        <div class="services-list" id="servicesList"></div>
        <div class="note">Astuce : clique une prestation pour la modifier / supprimer.</div>
      </div>

      <!-- FORM -->
      <div class="edit-card">
        <div class="card-title">
          <span id="formTitle">Nouvelle prestation</span>
          <span class="sub" id="formSub">Ajout au catalogue</span>
        </div>

        <form id="serviceForm">
          <input type="hidden" id="svc-id">

          <div class="form-group">
            <label for="svc-name">Nom</label>
            <input id="svc-name" type="text" placeholder="Ex. Ménage complet T2" required>
          </div>

          <div class="inline-fields">
            <div class="form-group">
              <label for="svc-category">Catégorie</label>
              <select id="svc-category" required>
                <option value="menage">Ménage</option>
                <option value="checkin">Check-in / Check-out</option>
                <option value="reassort">Réassort & kits</option>
                <option value="autre">Autre</option>
              </select>
            </div>
            <div class="form-group">
              <label for="svc-duration">Durée</label>
              <input id="svc-duration" type="text" placeholder="Ex. 1 h 30">
              <div class="small-hint">Durée indicative pour la planification.</div>
            </div>
          </div>

          <div class="inline-fields">
            <div class="form-group">
              <label for="svc-price">Tarif</label>
              <input id="svc-price" type="number" min="0" step="1" placeholder="Ex. 45">
            </div>
            <div class="form-group">
              <label for="svc-unit">Unité</label>
              <select id="svc-unit">
                <option value="€/prestation">€/prestation</option>
                <option value="€/heure">€/heure</option>
                <option value="€/séjour">€/séjour</option>
              </select>
            </div>
          </div>

          <div class="checkbox-row">
            <input id="svc-kits" type="checkbox" checked>
            <label for="svc-kits">Inclut un ou plusieurs kits CleanUp.</label>
          </div>

          <div class="form-group">
            <label for="svc-desc">Description</label>
            <textarea id="svc-desc" rows="3"
              placeholder="Ex. Ménage intégral, sols, surfaces, sanitaires, draps, kit accueil…"></textarea>
          </div>

          <div class="btn-row">
            <button class="cta-btn" type="submit" id="btnSave">Ajouter</button>
            <button class="ghost-btn" type="button" onclick="resetForm()">Annulé</button>
          </div>

          <button class="danger-btn" type="button" id="btnDelete" style="display:none;" onclick="deleteSelected()">
            Supprimer
          </button>

          <div class="note">
            Cette page alimente le catalogue qui sera utilisé dans le planning (ajout de presta par date).
          </div>
        </form>
      </div>

    </div>
  </div>

  <script>
    // ===== Base commune (même clé que conciergerie.html) =====
    const DATA_KEY = "cm_conciergerie_data_v1";

    function uid(prefix){
      return (prefix||"x") + "_" + Math.random().toString(16).slice(2) + "_" + Date.now().toString(16);
    }

    function loadData(){
      try{
        const raw = localStorage.getItem(DATA_KEY);
        if(raw) return JSON.parse(raw);
      }catch(e){}
      return null;
    }

    function saveData(d){
      localStorage.setItem(DATA_KEY, JSON.stringify(d));
    }

    function ensureData(){
      const existing = loadData();
      if(existing) return existing;
      const seeded = { homes:[], events:[], services:[], threads:[], payments:[], kits:[], requests:[] };
      saveData(seeded);
      return seeded;
    }

    const app = ensureData();
    app.homes = Array.isArray(app.homes) ? app.homes : [];
    app.events = Array.isArray(app.events) ? app.events : [];
    app.services = Array.isArray(app.services) ? app.services : [];
    app.requests = Array.isArray(app.requests) ? app.requests : [];

    // Migration: garantir id
    (function migrate(){
      let changed = false;
      app.services.forEach(s=>{
        if(!s.id){ s.id = uid("svc"); changed = true; }
      });
      if(changed) saveData(app);
    })();

    // ===== UI refs =====
    const servicesListEl = document.getElementById("servicesList");
    const servicesCountLabel = document.getElementById("servicesCountLabel");
    const filterButtons = document.querySelectorAll(".filter-btn");

    const kpiCount = document.getElementById("kpiCount");
    const kpiFilter = document.getElementById("kpiFilter");
    const kpiAvg = document.getElementById("kpiAvg");
    const kpiKits = document.getElementById("kpiKits");

    const form = document.getElementById("serviceForm");
    const formTitle = document.getElementById("formTitle");
    const formSub = document.getElementById("formSub");
    const btnSave = document.getElementById("btnSave");
    const btnDelete = document.getElementById("btnDelete");

    const f_id = document.getElementById("svc-id");
    const f_name = document.getElementById("svc-name");
    const f_category = document.getElementById("svc-category");
    const f_duration = document.getElementById("svc-duration");
    const f_price = document.getElementById("svc-price");
    const f_unit = document.getElementById("svc-unit");
    const f_kits = document.getElementById("svc-kits");
    const f_desc = document.getElementById("svc-desc");

    let currentFilter = "all";

    function categoryLabel(cat) {
      switch (cat) {
        case "menage": return "Ménage";
        case "checkin": return "Check-in / Check-out";
        case "reassort": return "Réassort & kits";
        default: return "Autre";
      }
    }

    function categoryClass(cat){
      if (cat === "menage") return "c-menage";
      if (cat === "checkin") return "c-checkin";
      if (cat === "reassort") return "c-reassort";
      return "c-autre";
    }

    function computeKpis(filtered){
      kpiCount.textContent = filtered.length;
      kpiFilter.textContent = (currentFilter === "all") ? "Tous" : categoryLabel(currentFilter);

      const prices = filtered.map(x => x.price).filter(p => typeof p === "number" && !Number.isNaN(p));
      const avg = prices.length ? (prices.reduce((a,b)=>a+b,0) / prices.length) : 0;
      kpiAvg.textContent = prices.length ? Math.round(avg) + " €" : "—";

      const kitsCount = filtered.filter(x => !!x.kits).length;
      kpiKits.textContent = filtered.length ? (kitsCount + "/" + filtered.length) : "—";
    }

    function getFiltered(){
      const list = app.services.slice();
      return list.filter(svc => currentFilter === "all" ? true : svc.category === currentFilter);
    }

    function renderServices() {
      servicesListEl.innerHTML = "";

      const filtered = getFiltered();

      servicesCountLabel.textContent =
        filtered.length + " prestation" + (filtered.length > 1 ? "s" : "") + " affichée(s)";

      computeKpis(filtered);

      if (!filtered.length) {
        const empty = document.createElement("div");
        empty.className = "service-item";
        empty.style.cursor = "default";
        empty.textContent = "Aucune prestation. Ajoute-en une à droite.";
        servicesListEl.appendChild(empty);
        return;
      }

      filtered.forEach(svc => {
        const item = document.createElement("div");
        item.className = "service-item";
        item.title = "Cliquer pour modifier";

        item.addEventListener("click", ()=> loadIntoForm(svc.id));

        const header = document.createElement("div");
        header.className = "service-header";

        const leftHeader = document.createElement("div");
        leftHeader.style.display = "flex";
        leftHeader.style.flexDirection = "column";
        leftHeader.style.gap = "2px";

        const nameEl = document.createElement("div");
        nameEl.className = "service-name";
        nameEl.textContent = svc.name || "(sans nom)";

        const chip = document.createElement("div");
        chip.className = "service-chip " + categoryClass(svc.category);
        chip.textContent = categoryLabel(svc.category);

        leftHeader.appendChild(nameEl);
        leftHeader.appendChild(chip);

        const rightHeader = document.createElement("div");
        rightHeader.style.display = "flex";
        rightHeader.style.alignItems = "center";
        rightHeader.style.gap = "8px";

        const badge = document.createElement("span");
        badge.style.fontSize = "11px";
        badge.style.fontWeight = "900";
        badge.style.color = svc.active === false ? "#b3261e" : "#1b8f4d";
        badge.textContent = (svc.active === false) ? "Inactif" : "Actif";

        rightHeader.appendChild(badge);

        header.appendChild(leftHeader);
        header.appendChild(rightHeader);

        const mainline = document.createElement("div");
        mainline.className = "service-mainline";

        const metaLeft = document.createElement("div");
        metaLeft.className = "service-meta";

        const price = document.createElement("span");
        price.className = "price-tag";
        price.textContent = (svc.price != null && svc.unit) ? (svc.price + " " + svc.unit) : "—";

        const duration = document.createElement("span");
        duration.className = "duration-tag";
        duration.textContent = svc.duration ? svc.duration : "Durée —";

        metaLeft.appendChild(price);
        metaLeft.appendChild(duration);

        if (svc.kits) {
          const kitsTag = document.createElement("span");
          kitsTag.className = "kits-tag";
          kitsTag.textContent = "Kits inclus";
          metaLeft.appendChild(kitsTag);
        }

        mainline.appendChild(metaLeft);

        const desc = document.createElement("div");
        desc.className = "desc";
        desc.textContent = svc.desc || "";

        item.appendChild(header);
        item.appendChild(mainline);
        item.appendChild(desc);

        servicesListEl.appendChild(item);
      });
    }

    function loadIntoForm(id){
      const svc = app.services.find(s=>s.id === id);
      if(!svc) return;

      f_id.value = svc.id;
      f_name.value = svc.name || "";
      f_category.value = svc.category || "menage";
      f_duration.value = svc.duration || "";
      f_price.value = (svc.price == null) ? "" : String(svc.price);
      f_unit.value = svc.unit || "€/prestation";
      f_kits.checked = !!svc.kits;
      f_desc.value = svc.desc || "";

      formTitle.textContent = "Modifier prestation";
      formSub.textContent = "Clique sur 'Supprimer' si besoin";
      btnSave.textContent = "Enregistrer";
      btnDelete.style.display = "block";
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    function resetForm(){
      f_id.value = "";
      form.reset();
      f_kits.checked = true;
      formTitle.textContent = "Nouvelle prestation";
      formSub.textContent = "Ajout au catalogue";
      btnSave.textContent = "Ajouter";
      btnDelete.style.display = "none";
      // default
      f_category.value = "menage";
      f_unit.value = "€/prestation";
    }

    function deleteSelected(){
      const id = f_id.value;
      if(!id) return;

      const svc = app.services.find(s=>s.id === id);
      if(!svc) return;

      if(!confirm("Supprimer '" + (svc.name||"cette prestation") + "' ?")) return;

      app.services = app.services.filter(s=>s.id !== id);
      saveData(app);
      resetForm();
      renderServices();
    }

    // Filtres
    filterButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        filterButtons.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        currentFilter = btn.dataset.filter || "all";
        renderServices();
      });
    });

    // Submit (ajout ou update)
    form.addEventListener("submit", (e) => {
      e.preventDefault();

      const id = f_id.value.trim();
      const name = f_name.value.trim();
      const category = f_category.value;
      const duration = f_duration.value.trim();
      const priceVal = f_price.value;
      const unit = f_unit.value;
      const kits = f_kits.checked;
      const desc = f_desc.value.trim();

      if(!name) return;

      const price = priceVal ? Number(priceVal) : null;

      if(id){
        // update
        const svc = app.services.find(s=>s.id === id);
        if(!svc) return;

        svc.name = name;
        svc.category = category;
        svc.duration = duration;
        svc.price = (priceVal ? price : null);
        svc.unit = unit;
        svc.kits = kits;
        svc.desc = desc;

      }else{
        // create
        app.services.push({
          id: uid("svc"),
          name,
          category,
          duration,
          price: (priceVal ? price : null),
          unit,
          kits,
          desc,
          active: true
        });
      }

      saveData(app);
      resetForm();
      renderServices();
    });

    renderServices();
    resetForm();
  </script>
</body>
</html>
