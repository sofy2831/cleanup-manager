<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CleanUp Manager – Catalogue</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --violet-light:#F3ECFF;
      --violet-mid:#DCCBFF;
      --violet-main:#7A5CFF;
      --violet-dark:#6238FF;
      --text-dark:#111;
      --green:#1b8f4d;
      --grey:#777;
      --border: rgba(122,92,255,0.18);
      --shadow: 0 14px 36px rgba(0,0,0,0.08);
    }

    *,*::before,*::after{ box-sizing:border-box; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }

    body{
      margin:0;
      padding:0;
      background:linear-gradient(180deg,#F8F4FF 0%,#EDE6FF 80%);
      color:var(--text-dark);
    }

    .page{
      min-height:100vh;
      display:flex;
      flex-direction:column;
      align-items:center;
      padding:16px 16px 32px;
      padding-bottom:96px; /* place bandeau bas */
    }

    /* TOPBAR */
    .topbar{
      width:100%;
      max-width:980px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      position:sticky;
      top:0;
      z-index:10;
      padding:10px 0;
      background:rgba(248,244,255,.85);
      backdrop-filter:blur(6px);
    }

    .pill-link{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      background:#fff;
      border:2px solid var(--violet-main);
      color:var(--violet-main);
      text-decoration:none;
      font-weight:800;
      font-size:13px;
      box-shadow:0 3px 10px rgba(0,0,0,.06);
      white-space:nowrap;
      cursor:pointer;
    }

    .pill-link.primary{
      background:linear-gradient(90deg,var(--violet-main),var(--violet-dark));
      border-color:transparent;
      color:#fff;
      box-shadow:0 4px 12px rgba(0,0,0,.15);
    }

    /* LOGO + TITRE */
    .logo-title{
      display:flex;
      justify-content:center;
      align-items:center;
      gap:8px;
      margin-top:8px;
      margin-bottom:6px;
      text-align:center;
    }

    .logo-icon{
      width:38px;
      height:38px;
      border-radius:50%;
      background:#fff;
      border:2px solid var(--violet-main);
      display:flex;
      align-items:center;
      justify-content:center;
      color:var(--violet-main);
      font-size:20px;
      font-weight:800;
      position:relative;
      flex-shrink:0;
    }

    .logo-icon::after{
      content:"✦";
      position:absolute;
      top:-6px;
      right:-4px;
      font-size:12px;
      color:var(--violet-main);
    }

    h1{ font-size:24px; margin:0; font-weight:800; color:#111; }
    .subtitle{ font-size:16px; color:#444; margin-top:4px; text-align:center; }
    .badge{
      margin-top:10px;
      padding:4px 10px;
      border-radius:999px;
      background:#fff;
      font-size:12px;
      color:#555;
      box-shadow:0 3px 10px rgba(0,0,0,.06);
      text-align:center;
    }

    /* Texte */
    .explain{
      width:100%;
      max-width:980px;
      margin-top:12px;
      background:#fff;
      border-radius:18px;
      box-shadow:0 6px 18px rgba(0,0,0,.08);
      padding:14px 14px 16px;
      text-align:left;
      border-left:5px solid var(--violet-main);
    }
    .explain h2{ font-size:15px; margin:0 0 6px; }
    .explain p{ margin:6px 0 0; font-size:13px; line-height:1.35; color:#444; }

    /* LAYOUT */
    .kits-layout{
      width:100%;
      max-width:980px;
      margin-top:14px;
      display:flex;
      flex-direction:column;
      gap:16px;
    }

    @media (min-width:768px){
      .kits-layout{ flex-direction:row; align-items:flex-start; }
    }

    .left-column{ flex:1.4; display:flex; flex-direction:column; gap:12px; }
    .right-column{ flex:1; }

    .card{
      background:rgba(255,255,255,0.86);
      border: 1px solid var(--border);
      border-radius:18px;
      box-shadow: var(--shadow);
      padding:16px 14px 18px;
      backdrop-filter: blur(10px);
    }

    .card-title{
      font-size:16px;
      font-weight:800;
      margin-bottom:8px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
    }

    .card-title span.sub{
      font-size:12px;
      font-weight:600;
      color:#666;
    }

    /* LISTE */
    .kits-list{
      display:flex;
      flex-direction:column;
      gap:10px;
      max-height:520px;
      overflow-y:auto;
    }

    .kit-item{
      background:#fff;
      border-radius:16px;
      padding:10px;
      box-shadow:0 3px 10px rgba(0,0,0,.05);
      font-size:12px;
      text-align:left;
      display:flex;
      flex-direction:column;
      gap:6px;
    }

    .kit-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
    }

    .kit-main{ display:flex; flex-direction:column; gap:2px; }

    .kit-name{
      font-size:14px;
      font-weight:800;
      color:#333;
    }

    .kit-tags{
      display:flex;
      flex-wrap:wrap;
      gap:4px;
      margin-top:2px;
    }

    .kit-tag{
      padding:2px 8px;
      border-radius:999px;
      font-size:10px;
      background:var(--violet-light);
      color:#5b45c8;
      font-weight:800;
    }

    .kit-tag.type{ background:#e3f6eb; color:var(--green); }

    .kit-toggle{
      font-size:11px;
      padding:2px 10px;
      border-radius:999px;
      border:1px solid #D3C7FF;
      background:#f7f4ff;
      color:#555;
      cursor:pointer;
      white-space:nowrap;
      font-weight:800;
    }

    .kit-toggle.active{
      background:var(--violet-main);
      color:#fff;
      border-color:var(--violet-main);
    }

    .kit-content-title{
      font-size:11px;
      font-weight:800;
      color:#555;
      margin-top:4px;
    }

    .kit-content-list{
      margin:0;
      padding-left:16px;
      font-size:11px;
      color:#555;
    }

    .kit-content-list li{ margin-bottom:2px; }

    .kit-footer{
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-size:11px;
      color:#777;
      flex-wrap:wrap;
      gap:4px;
    }

    /* FORM */
    .form-card-title{ font-size:15px; font-weight:800; margin-bottom:6px; }
    .form-subtitle{ font-size:12px; color:#555; margin-bottom:12px; }

    form{ display:flex; flex-direction:column; gap:8px; }

    .form-group{ text-align:left; }

    .form-group label{
      display:block;
      font-size:12px;
      font-weight:800;
      margin-bottom:4px;
      color:#333;
    }

    .form-group input,
    .form-group select,
    .form-group textarea{
      width:100%;
      padding:7px 9px;
      border-radius:10px;
      border:1px solid #D3C7FF;
      font-size:12px;
      outline:none;
      background:#fff;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus{
      border-color:var(--violet-main);
      box-shadow:0 0 0 2px rgba(122,92,255,.15);
    }

    .inline-fields{ display:flex; gap:8px; }
    .inline-fields .form-group{ flex:1; }

    .small-hint{
      font-size:10px;
      color:var(--grey);
      margin-top:2px;
      line-height:1.25;
    }

    .checkbox-row{
      display:flex;
      align-items:flex-start;
      gap:6px;
      margin-top:4px;
    }

    .checkbox-row input[type="checkbox"]{ margin-top:2px; }

    .checkbox-row label{
      font-size:11px;
      font-weight:600;
      color:#444;
      line-height:1.25;
    }

    .cta-btn{
      margin-top:10px;
      width:100%;
      border:none;
      border-radius:999px;
      padding:9px 14px;
      font-size:13px;
      font-weight:800;
      color:#fff;
      background:linear-gradient(90deg,var(--violet-main),var(--violet-dark));
      cursor:pointer;
      box-shadow:0 4px 12px rgba(0,0,0,.18);
    }

    .cta-btn:active{
      transform:translateY(1px);
      box-shadow:0 2px 8px rgba(0,0,0,.15);
    }

    /* ===== Bottom nav (comme planning) ===== */
    .bottom-nav{
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 50;
      display: flex;
      gap: 6px;
      justify-content: space-around;
      align-items: center;
      padding: 10px 10px calc(10px + env(safe-area-inset-bottom));
      background: rgba(255,255,255,0.92);
      border-top: 1px solid rgba(122,92,255,0.18);
      backdrop-filter: blur(10px);
    }
    .bottom-nav a{
      flex: 1;
      text-align: center;
      text-decoration: none;
      font-size: 11px;
      font-weight: 800;
      color: #666;
      padding: 10px 8px;
      border-radius: 999px;
      white-space: nowrap;
    }
    .bottom-nav a.active{
      background: linear-gradient(90deg,var(--violet-main),var(--violet-dark));
      color:#fff;
      box-shadow: 0 10px 22px rgba(0,0,0,0.10);
    }

    @media(min-width: 860px){
      .bottom-nav{
        position: static;
        max-width: 980px;
        margin: 12px auto 0;
        border-top: none;
        border: 1px solid rgba(122,92,255,0.18);
        border-radius: 999px;
        box-shadow: 0 4px 12px rgba(0,0,0,.08);
      }
      .page{ padding-bottom: 32px; }
    }

    @media (max-width: 520px){
      html, body{ overflow-x:hidden; }
      .page{ padding-left:12px; padding-right:12px; }
    }
  </style>
</head>

<body>
  <div class="page">

    <!-- TOPBAR -->
    <div class="topbar">
      <a class="pill-link" href="planning.html">← Planning</a>
      <div style="display:flex; gap:8px; align-items:center;">
        <a class="pill-link" href="nouvelle-prestation.html">+ Prestation</a>
        <button class="pill-link" type="button" id="logoutBtn">Déconnexion</button>
      </div>
    </div>

    <!-- LOGO + TITRE -->
    <div class="logo-title">
      <div class="logo-icon">✓</div>
      <h1>CleanUp Manager</h1>
    </div>

    <div class="subtitle">Catalogue – Prestations & kits</div>
    <div class="badge">Active/désactive ce que tu proposes. Tu ajoutes le reste directement dans le code.</div>

    <div class="explain">
      <h2>À quoi sert ce catalogue ?</h2>
      <p>
        Ce sont tes <b>prestations</b> et tes <b>kits</b>. Le planning et la création de prestations s’appuient dessus.
      </p>
    </div>

    <!-- LAYOUT -->
    <div class="kits-layout">

      <!-- GAUCHE -->
      <div class="left-column">
        <div class="card">
          <div class="card-title">
            <span>Prestations disponibles</span>
            <span class="sub" id="kitsCountLabel"></span>
          </div>

          <div class="kits-list" id="kitsList"></div>
        </div>
      </div>

      <!-- DROITE -->
      <div class="right-column">
        <div class="card">
          <div class="form-card-title">Ajouter une prestation</div>
          <div class="form-subtitle">
            Ajout local (front). Plus tard tu brancheras ça sur Firestore.
          </div>

          <form id="kitForm">
            <div class="form-group">
              <label for="kit-name">Nom de la prestation</label>
              <input id="kit-name" type="text" placeholder="Ex. Check-in" required>
            </div>

            <div class="inline-fields">
              <div class="form-group">
                <label for="kit-type">Catégorie</label>
                <select id="kit-type">
                  <option value="Ménage">Ménage</option>
                  <option value="Remise en état">Remise en état</option>
                  <option value="Check-in / Check-out">Check-in / Check-out</option>
                  <option value="Linge">Linge</option>
                  <option value="Maintenance">Maintenance</option>
                  <option value="Autre">Autre</option>
                </select>
              </div>

              <div class="form-group">
                <label for="kit-note">Note (optionnel)</label>
                <input id="kit-note" type="text" placeholder="Ex. inter-séjour, logement non conforme…">
                <div class="small-hint">Tu peux t’en servir comme mémo équipe.</div>
              </div>
            </div>

            <div class="form-group">
              <label for="kit-content">Checklist (optionnel)</label>
              <textarea id="kit-content" rows="4"
                placeholder="- Sols
- Sanitaires
- Cuisine
- Poubelles"></textarea>
              <div class="small-hint">Un élément par ligne.</div>
            </div>

            <div class="checkbox-row">
              <input id="kit-active-default" type="checkbox" checked>
              <label for="kit-active-default">
                Activer par défaut
              </label>
            </div>

            <button class="cta-btn" type="submit">Ajouter</button>
          </form>
        </div>
      </div>

    </div>

  </div>

  <!-- ✅ BANDEAU BAS (même que planning) -->
  <nav class="bottom-nav" aria-label="Navigation">
    <a href="planning.html">Planning</a>
    <a href="import-ical.html">iCal</a>
    <a href="messagerie.html">Messages</a>
    <a href="catalogue.html" class="active">Catalogue</a>
    <a href="logements.html">Logements</a>
  </nav>

  <script>
    // === "Catalogue" local : prestations (tu rajoutes la suite quand tu veux) ===
    const items = [
      {
        id: 101,
        name: "Ménage standard (inter-séjour)",
        type: "Ménage",
        active: true,
        content: [
          "Sols",
          "Sanitaires",
          "Cuisine",
          "Poubelles",
          "Surfaces"
        ],
        note: "Inter-séjour"
      },
      {
        id: 102,
        name: "Remise en état (logement non conforme)",
        type: "Remise en état",
        active: true,
        content: [
          "Constat rapide",
          "Nettoyage intensif zones critiques",
          "Photos avant/après",
          "Signalement des anomalies"
        ],
        note: "Logement non conforme"
      },
      {
        id: 103,
        name: "Check-in",
        type: "Check-in / Check-out",
        active: true,
        content: [
          "Arrivée voyageurs",
          "Remise des clés / code",
          "Rappel règles logement",
          "Vérif kit d’accueil"
        ],
        note: "Accueil"
      },
      {
        id: 104,
        name: "Check-out",
        type: "Check-in / Check-out",
        active: true,
        content: [
          "Récupération clés",
          "État rapide",
          "Photos si besoin",
          "Signalement casse / oubli"
        ],
        note: "Sortie"
      }
    ];

    const listEl = document.getElementById("kitsList");
    const countEl = document.getElementById("kitsCountLabel");
    const formEl = document.getElementById("kitForm");

    const logoutBtn = document.getElementById("logoutBtn");
    logoutBtn?.addEventListener("click", ()=>{
      // si tu as déjà Firebase auth ailleurs, tu brancheras ici
      localStorage.removeItem("cm_auth");
      location.href = "index.html";
    });

    function esc(s){
      return String(s ?? "")
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    function render(){
      listEl.innerHTML = "";
      countEl.textContent = items.length + " élément" + (items.length>1?"s":"");

      items.forEach(it=>{
        const item = document.createElement("div");
        item.className = "kit-item";

        const header = document.createElement("div");
        header.className = "kit-header";

        const main = document.createElement("div");
        main.className = "kit-main";

        const nameEl = document.createElement("div");
        nameEl.className = "kit-name";
        nameEl.textContent = it.name;

        const tagsEl = document.createElement("div");
        tagsEl.className = "kit-tags";

        const typeTag = document.createElement("span");
        typeTag.className = "kit-tag type";
        typeTag.textContent = it.type || "Autre";
        tagsEl.appendChild(typeTag);

        if(it.note){
          const noteTag = document.createElement("span");
          noteTag.className = "kit-tag";
          noteTag.textContent = it.note;
          tagsEl.appendChild(noteTag);
        }

        main.appendChild(nameEl);
        main.appendChild(tagsEl);

        const toggleBtn = document.createElement("button");
        toggleBtn.type = "button";
        toggleBtn.className = "kit-toggle" + (it.active ? " active" : "");
        toggleBtn.textContent = it.active ? "Actif" : "Inactif";
        toggleBtn.addEventListener("click", ()=>{
          it.active = !it.active;
          render();
        });

        header.appendChild(main);
        header.appendChild(toggleBtn);
        item.appendChild(header);

        if(it.content && it.content.length){
          const contentTitle = document.createElement("div");
          contentTitle.className = "kit-content-title";
          contentTitle.textContent = "Checklist :";
          item.appendChild(contentTitle);

          const ul = document.createElement("ul");
          ul.className = "kit-content-list";
          it.content.forEach(line=>{
            const li = document.createElement("li");
            li.textContent = line;
            ul.appendChild(li);
          });
          item.appendChild(ul);
        }

        const footer = document.createElement("div");
        footer.className = "kit-footer";

        const noteEl = document.createElement("div");
        noteEl.textContent = it.note || "";

        const statusEl = document.createElement("div");
        statusEl.textContent = it.active ? "Disponible" : "Masqué";

        footer.appendChild(noteEl);
        footer.appendChild(statusEl);

        item.appendChild(footer);
        listEl.appendChild(item);
      });
    }

    formEl.addEventListener("submit", (e)=>{
      e.preventDefault();

      const name = document.getElementById("kit-name").value.trim();
      const type = document.getElementById("kit-type").value;
      const note = document.getElementById("kit-note").value.trim();
      const contentText = document.getElementById("kit-content").value.trim();
      const activeDefault = document.getElementById("kit-active-default").checked;

      if(!name) return;

      const newId = items.length ? Math.max(...items.map(k => k.id)) + 1 : 1;
      const contentLines = contentText
        ? contentText.split("\n").map(l => l.replace(/^[-•]\s*/, "").trim()).filter(Boolean)
        : [];

      items.push({
        id: newId,
        name,
        type,
        active: activeDefault,
        content: contentLines,
        note: note || ""
      });

      render();

      document.getElementById("kit-name").value = "";
      document.getElementById("kit-content").value = "";
      document.getElementById("kit-note").value = "";
      document.getElementById("kit-type").value = "Ménage";
      document.getElementById("kit-active-default").checked = true;
    });

    render();
  </script>
</body>
</html>
