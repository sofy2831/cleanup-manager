<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CleanUp Manager – Catalogue</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --violet-light:#F3ECFF;
      --violet-main:#7A5CFF;
      --violet-dark:#6238FF;
      --text:#111;
      --muted:#666;
      --green:#1b8f4d;
      --border: rgba(122,92,255,0.18);
      --shadow: 0 14px 36px rgba(0,0,0,0.08);
    }
    *,*::before,*::after{ box-sizing:border-box; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    body{
      margin:0;
      background:linear-gradient(180deg,#F8F4FF 0%,#EDE6FF 80%);
      color:var(--text);
    }
    .page{
      min-height:100vh;
      display:flex;
      flex-direction:column;
      align-items:center;
      padding:16px 16px 32px;
      padding-bottom:96px;
    }

    /* TOPBAR */
    .topbar{
      width:100%;
      max-width:980px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      position:sticky;
      top:0;
      z-index:10;
      padding:10px 0;
      background:rgba(248,244,255,.85);
      backdrop-filter:blur(6px);
    }
    .pill-link{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      background:#fff;
      border:2px solid var(--violet-main);
      color:var(--violet-main);
      text-decoration:none;
      font-weight:800;
      font-size:13px;
      box-shadow:0 3px 10px rgba(0,0,0,.06);
      white-space:nowrap;
      cursor:pointer;
    }
    .pill-link.primary{
      background:linear-gradient(90deg,var(--violet-main),var(--violet-dark));
      border-color:transparent;
      color:#fff;
      box-shadow:0 4px 12px rgba(0,0,0,.15);
    }

    /* LOGO + TITRE */
    .logo-title{
      display:flex;
      justify-content:center;
      align-items:center;
      gap:8px;
      margin-top:8px;
      margin-bottom:6px;
      text-align:center;
    }
    .logo-icon{
      width:38px;height:38px;border-radius:50%;
      background:#fff;border:2px solid var(--violet-main);
      display:flex;align-items:center;justify-content:center;
      color:var(--violet-main);
      font-size:20px;font-weight:800;
      position:relative;flex-shrink:0;
    }
    .logo-icon::after{
      content:"✦";
      position:absolute;
      top:-6px; right:-4px;
      font-size:12px;
      color:var(--violet-main);
    }
    h1{ font-size:24px; margin:0; font-weight:800; color:#111; }
    .subtitle{ font-size:16px; color:#444; margin-top:4px; text-align:center; }
    .badge{
      margin-top:10px;
      padding:4px 10px;
      border-radius:999px;
      background:#fff;
      font-size:12px;
      color:#555;
      box-shadow:0 3px 10px rgba(0,0,0,.06);
      text-align:center;
    }

    .explain{
      width:100%;
      max-width:980px;
      margin-top:12px;
      background:#fff;
      border-radius:18px;
      box-shadow:0 6px 18px rgba(0,0,0,.08);
      padding:14px 14px 16px;
      text-align:left;
      border-left:5px solid var(--violet-main);
    }
    .explain h2{ font-size:15px; margin:0 0 6px; }
    .explain p{ margin:6px 0 0; font-size:13px; line-height:1.35; color:#444; }

    /* Tabs */
    .tabs{
      width:100%;
      max-width:980px;
      margin-top:12px;
      display:inline-flex;
      gap:6px;
      padding:6px;
      background:rgba(255,255,255,0.70);
      border:1px solid var(--border);
      border-radius:999px;
      box-shadow:0 6px 18px rgba(0,0,0,.06);
      backdrop-filter: blur(10px);
    }
    .tab{
      flex:1;
      border:none;
      border-radius:999px;
      padding:9px 10px;
      font-weight:800;
      font-size:12px;
      cursor:pointer;
      background:transparent;
      color:#666;
    }
    .tab.active{
      background:linear-gradient(90deg,var(--violet-main),var(--violet-dark));
      color:#fff;
      box-shadow:0 10px 22px rgba(0,0,0,0.10);
    }

    /* LAYOUT */
    .layout{
      width:100%;
      max-width:980px;
      margin-top:14px;
      display:flex;
      flex-direction:column;
      gap:16px;
    }
    @media (min-width:768px){
      .layout{ flex-direction:row; align-items:flex-start; }
    }
    .left-column{ flex:1.4; display:flex; flex-direction:column; gap:12px; }
    .right-column{ flex:1; }

    .card{
      background:rgba(255,255,255,0.86);
      border:1px solid var(--border);
      border-radius:18px;
      box-shadow:var(--shadow);
      padding:16px 14px 18px;
      backdrop-filter: blur(10px);
    }
    .card-title{
      font-size:16px;
      font-weight:800;
      margin-bottom:8px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
    }
    .card-title span.sub{
      font-size:12px;
      font-weight:600;
      color:#666;
    }

    /* LISTE */
    .list{
      display:flex;
      flex-direction:column;
      gap:10px;
      max-height:520px;
      overflow-y:auto;
    }
    .item{
      background:#fff;
      border-radius:16px;
      padding:10px;
      box-shadow:0 3px 10px rgba(0,0,0,.05);
      font-size:12px;
      text-align:left;
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .item-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
    }
    .item-main{ display:flex; flex-direction:column; gap:2px; }
    .item-name{ font-size:14px; font-weight:800; color:#333; }
    .item-tags{
      display:flex;
      flex-wrap:wrap;
      gap:4px;
      margin-top:2px;
    }
    .tag{
      padding:2px 8px;
      border-radius:999px;
      font-size:10px;
      background:var(--violet-light);
      color:#5b45c8;
      font-weight:800;
    }
    .tag.type{ background:#e3f6eb; color:var(--green); }

    .toggle{
      font-size:11px;
      padding:2px 10px;
      border-radius:999px;
      border:1px solid #D3C7FF;
      background:#f7f4ff;
      color:#555;
      cursor:pointer;
      white-space:nowrap;
      font-weight:800;
    }
    .toggle.active{
      background:var(--violet-main);
      color:#fff;
      border-color:var(--violet-main);
    }

    .content-title{
      font-size:11px;
      font-weight:800;
      color:#555;
      margin-top:4px;
    }
    .content-list{
      margin:0;
      padding-left:16px;
      font-size:11px;
      color:#555;
    }
    .content-list li{ margin-bottom:2px; }

    .item-footer{
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-size:11px;
      color:#777;
      flex-wrap:wrap;
      gap:4px;
    }

    /* FORM */
    .form-card-title{ font-size:15px; font-weight:800; margin-bottom:6px; }
    .form-subtitle{ font-size:12px; color:#555; margin-bottom:12px; }

    form{ display:flex; flex-direction:column; gap:8px; }
    .form-group{ text-align:left; }
    .form-group label{
      display:block;
      font-size:12px;
      font-weight:800;
      margin-bottom:4px;
      color:#333;
    }
    .form-group input,
    .form-group select,
    .form-group textarea{
      width:100%;
      padding:7px 9px;
      border-radius:10px;
      border:1px solid #D3C7FF;
      font-size:12px;
      outline:none;
      background:#fff;
    }
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus{
      border-color:var(--violet-main);
      box-shadow:0 0 0 2px rgba(122,92,255,.15);
    }
    .inline-fields{ display:flex; gap:8px; }
    .inline-fields .form-group{ flex:1; }

    .checkbox-row{
      display:flex;
      align-items:flex-start;
      gap:6px;
      margin-top:4px;
    }
    .checkbox-row input[type="checkbox"]{ margin-top:2px; }
    .checkbox-row label{
      font-size:11px;
      font-weight:600;
      color:#444;
      line-height:1.25;
    }

    .cta-btn{
      margin-top:10px;
      width:100%;
      border:none;
      border-radius:999px;
      padding:9px 14px;
      font-size:13px;
      font-weight:800;
      color:#fff;
      background:linear-gradient(90deg,var(--violet-main),var(--violet-dark));
      cursor:pointer;
      box-shadow:0 4px 12px rgba(0,0,0,.18);
    }
    .small-hint{
      font-size:10px;
      color:#777;
      margin-top:2px;
      line-height:1.25;
    }

    /* ===== Bottom nav (comme planning) ===== */
    .bottom-nav{
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 50;
      display: flex;
      gap: 6px;
      justify-content: space-around;
      align-items: center;
      padding: 10px 10px calc(10px + env(safe-area-inset-bottom));
      background: rgba(255,255,255,0.92);
      border-top: 1px solid rgba(122,92,255,0.18);
      backdrop-filter: blur(10px);
    }
    .bottom-nav a{
      flex: 1;
      text-align: center;
      text-decoration: none;
      font-size: 11px;
      font-weight: 800;
      color: #666;
      padding: 10px 8px;
      border-radius: 999px;
      white-space: nowrap;
    }
    .bottom-nav a.active{
      background: linear-gradient(90deg,var(--violet-main),var(--violet-dark));
      color:#fff;
      box-shadow: 0 10px 22px rgba(0,0,0,0.10);
    }
    @media(min-width: 860px){
      .bottom-nav{
        position: static;
        max-width: 980px;
        margin: 12px auto 0;
        border-top: none;
        border: 1px solid rgba(122,92,255,0.18);
        border-radius: 999px;
        box-shadow: 0 4px 12px rgba(0,0,0,.08);
      }
      .page{ padding-bottom: 32px; }
    }
    @media (max-width: 520px){
      html, body{ overflow-x:hidden; }
      .page{ padding-left:12px; padding-right:12px; }
    }
  </style>
</head>

<body>
  <div class="page">
    <div class="topbar">
      <a class="pill-link" href="planning.html">← Planning</a>
      <div style="display:flex; gap:8px; align-items:center;">
        <a class="pill-link" href="nouvelle-prestation.html">+ Prestation</a>
        <button class="pill-link" type="button" id="logoutBtn">Déconnexion</button>
      </div>
    </div>

    <div class="logo-title">
      <div class="logo-icon">✓</div>
      <h1>CleanUp Manager</h1>
    </div>

    <div class="subtitle">Catalogue</div>
    <div class="badge">Onglets : Prestations / Kits. Active ou masque ce que tu utilises.</div>

    <div class="explain">
      <h2>Simple.</h2>
      <p>
        <b>Prestations</b> = ce que tu factures / planifies. <b>Kits</b> = réassort / consommables prêts à poser.
      </p>
    </div>

    <!-- Tabs -->
    <div class="tabs" role="tablist" aria-label="Catalogue">
      <button class="tab active" id="tabServices" type="button">Prestations</button>
      <button class="tab" id="tabKits" type="button">Kits</button>
    </div>

    <div class="layout">
      <!-- LEFT -->
      <div class="left-column">
        <div class="card">
          <div class="card-title">
            <span id="listTitle">Prestations</span>
            <span class="sub" id="countLabel"></span>
          </div>
          <div class="list" id="listEl"></div>
        </div>
      </div>

      <!-- RIGHT -->
      <div class="right-column">
        <div class="card">
          <div class="form-card-title" id="formTitle">Ajouter une prestation</div>
          <div class="form-subtitle" id="formSubtitle">Ajout local (front). Plus tard tu branches Firestore.</div>

          <form id="itemForm">
            <div class="form-group">
              <label for="nameEl" id="nameLabel">Nom</label>
              <input id="nameEl" type="text" placeholder="Ex. Check-in" required>
            </div>

            <div class="inline-fields">
              <div class="form-group">
                <label for="typeEl" id="typeLabel">Catégorie</label>
                <select id="typeEl"></select>
              </div>

              <div class="form-group">
                <label for="noteEl">Note (optionnel)</label>
                <input id="noteEl" type="text" placeholder="Ex. inter-séjour, logement non conforme…">
                <div class="small-hint">Mémo interne.</div>
              </div>
            </div>

            <div class="form-group">
              <label for="contentEl" id="contentLabel">Checklist / Contenu (optionnel)</label>
              <textarea id="contentEl" rows="4" placeholder="- Ligne 1&#10;- Ligne 2"></textarea>
              <div class="small-hint">Un élément par ligne.</div>
            </div>

            <div class="checkbox-row">
              <input id="activeEl" type="checkbox" checked>
              <label for="activeEl">Activer par défaut</label>
            </div>

            <button class="cta-btn" type="submit" id="submitBtn">Ajouter</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- BANDEAU BAS -->
  <nav class="bottom-nav" aria-label="Navigation">
    <a href="planning.html">Planning</a>
    <a href="import-ical.html">iCal</a>
    <a href="messagerie.html">Messages</a>
    <a href="catalogue.html" class="active">Catalogue</a>
    <a href="logements.html">Logements</a>
  </nav>

  <script>
    // ===== DATA =====
    const services = [
      {
        id: 101,
        name: "Ménage standard (inter-séjour)",
        type: "Ménage",
        active: true,
        content: ["Sols","Sanitaires","Cuisine","Poubelles","Surfaces"],
        note: "Inter-séjour"
      },
      {
        id: 102,
        name: "Remise en état (logement non conforme)",
        type: "Remise en état",
        active: true,
        content: ["Constat rapide","Nettoyage intensif zones critiques","Photos avant/après","Signalement anomalies"],
        note: "Logement non conforme"
      },
      {
        id: 103,
        name: "Check-in",
        type: "Check-in / Check-out",
        active: true,
        content: ["Arrivée voyageurs","Remise clés / code","Rappel règles","Vérif kit d’accueil"],
        note: "Accueil"
      },
      {
        id: 104,
        name: "Check-out",
        type: "Check-in / Check-out",
        active: true,
        content: ["Récupération clés","État rapide","Photos si besoin","Signalement casse / oubli"],
        note: "Sortie"
      }
    ];

    const kits = [
      {
        id: 201,
        name: "Kit essentiel",
        type: "Essentiel",
        active: true,
        content: [
          "1 Tampon à récurer jaune",
          "1 Torchon jaune",
          "1 30ml de liquide vaisselle",
          "1 Sac poubelle",
          "1 Capsule pour lave-linge",
          "2 pastilles lave-vaisselle",
          "1 Pastille pour lave-vaisselle",
          "1 capsule gel WC"
          "1 30ml de Nettoyant multi-usages"
        ],
        note: "Parfait pour séjours courts T2/T3."
      },
      {
        id: 202,
        name: "Kit cuisine",
        type: "Cuisine",
        active: true,
        content: [
          "2 capsules de café Nespresso",
          "1 sachet de café décaféiné",
          "1 sachet de Cola-Cao",
          "1 infusion de thé",
          "3 monodoses de lait",
          "2 monodoses de sucre",
          "Huile + vinaigre",
          "Sel + poivre",
          "1 rouleau essuie-tout"
        ],
        note: "Arrivées type Airbnb."
      },
      {
        id: 203,
        name: "Kit bain 2 personnes",
        type: "Salle de bain",
        active: false,
        content: [
          "1 rouleaux papier toilette",
          "2 gel douche",
          "2 shampoing",
          "2 savon main",
                  ],
        note: "À activer sur séjours >2 nuits."
      },
      {
        id: 204,
        name: "Kit bain 4 personnes",
        type: "Salle de bain",
        active: true,
        content: [
          "2 rouleaux papier toilette",
          "4 gel douche",
          "4 shampoing",
          "4 savon main",
                  ],
        note: "À activer sur séjours >2 nuits."
      },
      {
        id: 205,
        name: "Kit bain 6 personnes",
        type: "Salle de bain",
        active: true,
        content: [
          "3 rouleaux papier toilette",
          "6 gel douche",
          "6 shampoing",
          "6 savon main",
                  ],
        note: "Grande capacité."
      },
      {
        id: 206,
        name: "Kit hygiène 8 personnes",
        type: "Salle de bain",
        active: true,
        content: [
          "4 rouleaux papier toilette",
          "6 gel douche",
          "6 shampoing",
          "6 savon main",
                  ],
        note: "Grande capacité (XL)."
      }
    ];

    // ===== UI =====
    const tabServices = document.getElementById("tabServices");
    const tabKits = document.getElementById("tabKits");

    const listTitle = document.getElementById("listTitle");
    const countLabel = document.getElementById("countLabel");
    const listEl = document.getElementById("listEl");

    const formTitle = document.getElementById("formTitle");
    const formSubtitle = document.getElementById("formSubtitle");

    const formEl = document.getElementById("itemForm");
    const nameEl = document.getElementById("nameEl");
    const typeEl = document.getElementById("typeEl");
    const noteEl = document.getElementById("noteEl");
    const contentEl = document.getElementById("contentEl");
    const activeEl = document.getElementById("activeEl");

    const logoutBtn = document.getElementById("logoutBtn");
    logoutBtn?.addEventListener("click", ()=>{
      localStorage.removeItem("cm_auth");
      location.href = "index.html";
    });

    let mode = "services"; // "services" | "kits"

    const TYPES_SERVICES = ["Ménage","Remise en état","Check-in / Check-out","Linge","Maintenance","Autre"];
    const TYPES_KITS = ["Essentiel","Cuisine","Salle de bain","Bienvenue / accueil","Autre"];

    function linesFromTextarea(t){
      const contentText = (t || "").trim();
      return contentText
        ? contentText.split("\n").map(l => l.replace(/^[-•]\s*/, "").trim()).filter(Boolean)
        : [];
    }

    function renderTypeOptions(){
      const types = (mode === "services") ? TYPES_SERVICES : TYPES_KITS;
      typeEl.innerHTML = types.map(x=>`<option value="${x}">${x}</option>`).join("");
    }

    function renderHeader(){
      if(mode === "services"){
        tabServices.classList.add("active");
        tabKits.classList.remove("active");
        listTitle.textContent = "Prestations";
        formTitle.textContent = "Ajouter une prestation";
        formSubtitle.textContent = "Ajout local (front). Plus tard tu branches Firestore.";
      }else{
        tabKits.classList.add("active");
        tabServices.classList.remove("active");
        listTitle.textContent = "Kits";
        formTitle.textContent = "Ajouter un kit";
        formSubtitle.textContent = "Ajout local (front). Plus tard tu branches Firestore.";
      }
      renderTypeOptions();
    }

    function renderList(){
      listEl.innerHTML = "";
      const data = (mode === "services") ? services : kits;

      countLabel.textContent = data.length + " élément" + (data.length>1?"s":"");

      data.forEach(it=>{
        const item = document.createElement("div");
        item.className = "item";

        const header = document.createElement("div");
        header.className = "item-header";

        const main = document.createElement("div");
        main.className = "item-main";

        const name = document.createElement("div");
        name.className = "item-name";
        name.textContent = it.name;

        const tags = document.createElement("div");
        tags.className = "item-tags";

        const t1 = document.createElement("span");
        t1.className = "tag type";
        t1.textContent = it.type || "Autre";
        tags.appendChild(t1);

        if(it.note){
          const t2 = document.createElement("span");
          t2.className = "tag";
          t2.textContent = it.note;
          tags.appendChild(t2);
        }

        main.appendChild(name);
        main.appendChild(tags);

        const toggle = document.createElement("button");
        toggle.type = "button";
        toggle.className = "toggle" + (it.active ? " active" : "");
        toggle.textContent = it.active ? "Actif" : "Inactif";
        toggle.addEventListener("click", ()=>{
          it.active = !it.active;
          renderList();
        });

        header.appendChild(main);
        header.appendChild(toggle);
        item.appendChild(header);

        if(it.content && it.content.length){
          const ct = document.createElement("div");
          ct.className = "content-title";
          ct.textContent = (mode === "services") ? "Checklist :" : "Contenu :";
          item.appendChild(ct);

          const ul = document.createElement("ul");
          ul.className = "content-list";
          it.content.forEach(line=>{
            const li = document.createElement("li");
            li.textContent = line;
            ul.appendChild(li);
          });
          item.appendChild(ul);
        }

        const footer = document.createElement("div");
        footer.className = "item-footer";

        const note = document.createElement("div");
        note.textContent = it.note || "";

        const status = document.createElement("div");
        status.textContent = it.active ? "Disponible" : "Masqué";

        footer.appendChild(note);
        footer.appendChild(status);

        item.appendChild(footer);
        listEl.appendChild(item);
      });
    }

    function setMode(next){
      mode = next;
      renderHeader();
      renderList();

      // reset form
      nameEl.value = "";
      noteEl.value = "";
      contentEl.value = "";
      activeEl.checked = true;

      // default type selon mode
      typeEl.value = (mode === "services") ? "Ménage" : "Essentiel";
    }

    tabServices.addEventListener("click", ()=> setMode("services"));
    tabKits.addEventListener("click", ()=> setMode("kits"));

    formEl.addEventListener("submit", (e)=>{
      e.preventDefault();

      const name = nameEl.value.trim();
      if(!name) return;

      const type = typeEl.value;
      const note = noteEl.value.trim();
      const contentLines = linesFromTextarea(contentEl.value);
      const active = activeEl.checked;

      const data = (mode === "services") ? services : kits;
      const baseId = (mode === "services") ? 100 : 200;
      const newId = data.length ? (Math.max(...data.map(x=>x.id)) + 1) : (baseId + 1);

      data.push({
        id: newId,
        name,
        type,
        active,
        content: contentLines,
        note
      });

      renderList();

      nameEl.value = "";
      noteEl.value = "";
      contentEl.value = "";
      activeEl.checked = true;
    });

    // boot
    setMode("services");
  </script>
</body>
</html>


